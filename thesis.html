<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Construction of Insurance Tariff Classes</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<meta name="description" content="Welcome to website and blog of Martin Haringa." />

<link rel="icon" type="image/png" href="images/favicon.png" />

<script type="text/javascript" src="js/rmarkdown.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-20375833-14', 'auto');
  ga('send', 'pageview');
</script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="css/rmarkdown.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">



<div id="rStudioHeader" class="alwaysShrunk">
  <div class="innards bandContent">
    <div>
    <a class="productName" href="index.html"> Martin Haringa </a>
      <div class="rStudio"><span class="light"> </span> 
      <a href="https://www.rstudio.com/"><div class="logo"></div></a></div>
        </div>
        
        <div id="menu">
          <div id="menuToggler"></div>
            <div id="menuItems">
              <a class="menuItem" href="index.html">Home</a>
                <a class="menuItem" href="concentration.html">Maximum Fire Risk Insured</a>
                  <a class="menuItem" href="thesis.html">Construction of Insurance Tariff Classes</a>
                  <a class="menuItem" href="choropleth.html">Choropleth maps in R</a>
                  <a class="menuItem" href="aboutme.html">About me</a>
                    <a class="menuItem" href="contact.html">Contact me</a>
                      <a class="menuItem gitHub" href="https://github.com/mharinga"></a>
                        <a class="menuItem gitHubText" href="https://github.com/mharinga">Source on GitHub</a>
                          </div>
                          </div>
                          </div>
                          </div>
                          
                          <style type="text/css">
                            #TOC {
                            margin-left: 35px;
                          margin-top: 90px;
                          }
</style>
  
  <script type="text/javascript">
    $(".main-container").removeClass("main-container").removeClass("container-fluid").addClass("footerPushDown");
  </script>
    
    
    <div id="pageContent" class="standardPadding">
      <div class="articleBandContent">

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Construction of Insurance Tariff Classes</h1>

</div>


<p>The project below describes parts of my Master’s thesis to obtain my degree in Actuarial Science and Mathematical Finance. The thesis was nominated for the Johan de Witt award for best actuarial thesis in 2016.</p>



<div class="band full">
  <div class="bandContent gallerySection">
    <div class="galleryItems">
      <div class="galleryItem">
        <a href="https://github.com/MHaringa/MHaringa.github.io/blob/master/images/MThesisHaringa.pdf"><img class="galleryItemImage" src="images/pdf2.png"/></a>
        <a href="https://github.com/MHaringa/MHaringa.github.io/blob/master/images/MThesisHaringa.pdf" class="galleryItemLabel">Master's Thesis</a>
      <div class="galleryItemDescription">Small-Area Statistical Analyses of Claim Frequency in Motor Insurance.
    </div>
  </div>
</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The goal of insurancerating is to give analytic techniques that can be used in insurance rating. It provides a data driven strategy for the construction of tariff classes in P&amp;C insurance. The goal is to bin the continuous factors such that categorical risk factors result which capture the effect of the covariate on the response in an accurate way, while being easy to use in a generalized linear model (GLM).</p>
<p>It also adds functionality showing additional lines for the reference categories in the levels of the coefficients in the output of a generalized linear regression analysis. In addition it implements a procedure determining the level of a factor with the largest exposure, and thereafter changing the base level of the factor to this level.</p>
</div>
<div id="installation" class="section level1">
<h1>Installation</h1>
<p>You can install insurancerating from github with:</p>
<pre class="r"><code># install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;MHaringa/insurancerating&quot;)</code></pre>
</div>
<div id="example" class="section level1">
<h1>Example</h1>
<p>This is a basic example which shows the techniques provided in insurancerating.</p>
<p>The first part shows how to construct tariff classes for the variable <em>age_policyholder</em> in the MTPL dataset:</p>
<pre class="r"><code>library(insurancerating)
library(ggplot2)
library(dplyr)
x &lt;- construct_tariff_classes(data = MTPL, nclaims = nclaims, x = age_policyholder, exposure = exposure)</code></pre>
<p>Show tariff classes:</p>
<pre class="r"><code>autoplot(x)</code></pre>
<p><img src="man/figures/plaatje-1.png" width="672" /></p>
<p>The second part adds the constructed tariff classes for the variable <em>age_policyholder</em> to the dataset, and sets the base level of the factor <em>age_policyholder</em> to the level with the largest exposure. In this example the class for ages (35,52], which contains the largest exposure.</p>
<pre class="r"><code>dat &lt;- MTPL %&gt;%
  mutate(age_policyholder_class = x$tariff_classes) %&gt;%
  mutate_if(is.character, as.factor) %&gt;%
  mutate_if(is.factor, list(~biggest_reference(., exposure)))
str(dat)</code></pre>
<pre><code>## &#39;data.frame&#39;:    32731 obs. of  5 variables:
##  $ age_policyholder      : int  43 21 54 44 20 38 68 45 76 30 ...
##  $ nclaims               : int  0 0 0 1 1 0 0 1 0 0 ...
##  $ exposure              : num  1 1 1 1 0.852 ...
##  $ amount                : num  0 0 0 57540 2057 ...
##  $ age_policyholder_class: Factor w/ 9 levels &quot;(39,50]&quot;,&quot;[18,25]&quot;,..: 1 2 5 1 2 4 7 1 8 3 ...</code></pre>
<p>The last part is to fit a <em>generalized linear model</em>. The function rating_factors prints the output including the reference group.</p>
<pre class="r"><code>model &lt;- glm(nclaims ~ age_policyholder_class, offset = log(exposure), family = &quot;poisson&quot;, data = dat)
rating_factors(model)</code></pre>
<pre><code>##                      term     cluster  estimate
## 1               Intercept (Intercept) 0.1368181
## 2  age_policyholder_class     (39,50] 1.0000000
## 3  age_policyholder_class     [18,25] 1.9438228
## 4  age_policyholder_class     (25,32] 1.3234995
## 5  age_policyholder_class     (32,39] 1.0568538
## 6  age_policyholder_class     (50,57] 0.8919696
## 7  age_policyholder_class     (57,64] 0.7423998
## 8  age_policyholder_class     (64,71] 0.7379362
## 9  age_policyholder_class     (71,83] 0.7021348
## 10 age_policyholder_class     (83,95] 0.6933378</code></pre>
</div>

</div> <!-- articleBandContent -->
</div> <!-- pageContent -->

<div id="rStudioFooter" class="band full">
<div class="bandContent">
  <div id="copyright">© Copyright 2018 RStudio inc.</div>
  <div id="logos">
    <a href="https://github.com/MHaringa" class="footerLogo gitHub"></a>
    <a href="https://www.linkedin.com/in/martin-haringa-71a7a61b" class="footerLogo linkedIn"></a>
  </div>
</div>
</div>

<!-- bizible -->
<script type="text/javascript" src="//cdn.bizible.com/scripts/bizible.js" async=""></script>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>


</body>
</html>
